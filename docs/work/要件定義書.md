
## ✈️ 旅行計画アプリ：要件定義書（案）
アプリ名：旅行計画アプリ
trip-plan

### 1. アプリケーションの目的

行きたい場所をいくつか設定し、それぞれの場所をどのようなルート、時間配分、移動手段、コストで回るのが最適かをシミュレーション・編集するためのデスクトップアプリケーション。

### 2. 機能要件 (Functional Requirements)

ユーザーが直接操作する、アプリケーションの核となる機能です。

#### 2.1. 計画管理機能
* **FR-1.1: 新規計画作成・保存**
    * 旅行計画を新規に作成し、ローカルファイルとして保存できること。
    * 保存した計画を呼び出して編集できること。
* **FR-1.2: 計画の基本情報設定**
    * 旅行名、旅行期間（開始日、終了日）を設定できること。

#### 2.2. 地点（スポット）管理機能
* **FR-2.1: スポットの追加・削除**
    * 地図上、または検索機能を使用して、訪問したいスポットを計画に追加できること。
    * 追加したスポットを計画から削除できること。
* **FR-2.2: スポット情報の編集**
    * 各スポットに対して、名称、住所、滞在予定時間（例: 1時間30分）を設定・編集できること。

#### 2.3. ルート計画・編集機能
* **FR-3.1: ルートの定義・編集**
    * 追加されたスポットの**訪問順序**を直感的な操作（ドラッグ＆ドロップなど）で変更できること。
* **FR-3.2: 移動区間の詳細設定**
    * あるスポットから次のスポットまでの**移動手段**（徒歩、車、公共交通機関など）を設定できること。
    * 移動手段に応じて、**出発時刻、到着予定時刻**を算出できること。
* **FR-3.3: 最適化の試行（オプション）**
    * 設定したスポット群に対して、**総移動距離/時間**が最短になるような**訪問順序**の提案（最適ルート計算）を行えること。（※高度な機能）

#### 2.4. 情報取得・算出機能 (API連携)
* **FR-4.1: 地図・経路情報の取得**
    * Google Maps API、OpenStreetMapなどの外部APIを利用し、以下の情報を取得できること。
        * スポット間の**移動距離**と**所要時間**（設定された移動手段に基づく）。
* **FR-4.2: コスト計算**
    * 移動手段や距離に基づいた**概算コスト**（例: 公共交通機関の運賃、ガソリン代概算）を算出し、表示できること。
    * 各スポットでの**入場料・食費などの予算**を手動で入力し、合計コストに含めることができること。

#### 2.5. 表示・出力機能
* **FR-5.1: タイムライン表示**
    * 設定されたルート、滞在時間、移動時間に基づき、**一日の行動スケジュール**（タイムライン）を時刻順に表示できること。
* **FR-5.2: 地図表示**
    * 計画に含まれる全スポットと、それらを結ぶルートを地図上に表示できること。

### 3. 非機能要件 (Non-Functional Requirements)

アプリケーションの品質や制約に関する要件です。

#### 3.1. 動作環境
* **NFR-1.1: OS**
    * Windows 11で安定して動作すること。
* **NFR-1.2: 開発環境**
    * Qt Open Source Edition (LGPL v3またはGPL v3) を使用して開発すること。

#### 3.2. ユーザビリティ
* **NFR-2.1: 直感的な操作**
    * ルートの変更や情報の編集が、マウス操作（ドラッグ＆ドロップ、クリック）で直感的に行えること。（QML/Qt Quickの導入を検討）
* **NFR-2.2: 応答速度**
    * APIからのデータ取得やルート再計算などの時間のかかる処理を除き、UI操作に対する応答が速やかであること。

#### 3.3. 保守性・拡張性
* **NFR-3.1: モジュール設計**
    * 今後、別のAPIや機能（例: 宿泊施設の検索）を追加しやすいよう、API通信層とUI層を分離して設計すること。

#### 3.4. ライセンス・公開
* **NFR-4.1: オープンソース**
    * アプリケーションのソースコードは、LGPL v3などのオープンソースライセンスでGitHubにて公開すること。
* **NFR-4.2: API利用規約の遵守**
    * 利用する外部API（地図、経路探索）の利用規約（特に無料枠、再配布制限）を厳格に遵守すること。
